<!DOCTYPE html>
<html lang="en-us">
    <head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<title>
		KendoUI TreeList Load on Demand &middot; Denis Kyashif&#39;s Blog
	</title>
	
	
  	<link rel="stylesheet" href="/css/style.css" />    
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/my.css">    
	
	<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
	
	
	<link href="" rel="alternate" type="application/rss+xml" title="Denis Kyashif&#39;s Blog" />
    <meta property="og:title" content="KendoUI TreeList Load on Demand" />
<meta property="og:description" content="How to lazily load the descendant items of a record in a TreeList." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://deniskyashif.com/kendoui-treelist-load-on-demand/" />
<meta property="og:image" content="https://deniskyashif.com/images/site-feature-image.png"/>
<meta property="article:published_time" content="2017-06-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-06-20T00:00:00+00:00" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-133185625-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

    <body>
        <a href="https://github.com/deniskyashif/blog" class="github-corner" target="_blank" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#211F1F; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<nav class="nav">
	<div class="nav-container">
        <a href="/">
			<h2 class="nav-title">Denis Kyashif&#39;s Blog</h2>
		</a>
        <a class="rss" href="/index.xml" type="application/rss+xml" target="_blank" title="RSS Feed">
            <i class="fa fa-2x fa-rss" aria-hidden="true"></i>
        </a>
		<ul>
    <li><a href="/">Posts</a></li>
    <li><a href="/talks">Talks</a></li>
    <li><a href="/about">About</a></li>
</ul>

	</div>
</nav>

        

<main>
	<div class="post">
		<div class="post-info">
    <time datetime="2017-06-20 00:00:00 &#43;0000 UTC">June 20, 2017</time>
    |
    <a href="https://github.com/deniskyashif/blog/blob/master/content/posts/2017-07-20-kendoui-treelist-load-on-demand.md" target="_blank">
        <i class="fa fa-edit"></i>&nbsp;Edit
    </a>

    
    <div class="tags">
        
        
        
        <a href="https://deniskyashif.com/tags/kendoui/" class="tag">kendoui</a>
        
        
        
        
        <a href="https://deniskyashif.com/tags/javascript/" class="tag">javascript</a>
        
        
    </div>
</div>

		<h1 class="post-title">KendoUI TreeList Load on Demand</h1>
<div class="post-line"></div>

		

		<p>The <a href="http://demos.telerik.com/kendo-ui/treelist/index">TreeList</a> isn't among the most popular KendoUI widgets, yet it's very useful and functional. It displays a hierarchically structured data, where each record has an optional relation to another record. The output is a grid which renders its rows in a tree-like fashion. In this blog post we'll see how to load the descendant items of a record on demand.</p>
<h2 id="the-problem">The Problem</h2>
<p>By default the TreeList expects us to provide the complete data set on initial load. In a real-world scenario, however, the amount of records tends to get quite large thus loading everything within a single API call would be inefficient and might hinder the app's usability. A common way to tackle such case is by adapting the widget to <strong>load the data on demand</strong>, that is we fetch and render the descendant items of a record only when the user has intended to see them. Being familiar with other KendoUI widgets like the TreeView or the Grid one might assume that there's an obvious and straightforward way to achieve this, but that's not the case with the TreeList.</p>
<h3 id="no-loadondemand-congfiguration-flag">No <code>loadOnDemand</code> congfiguration flag</h3>
<p>Unlike the <a href="http://docs.telerik.com/kendo-ui/api/javascript/ui/treeview#configuration-loadOnDemand">TreeView</a>, the <a href="http://docs.telerik.com/kendo-ui/api/javascript/ui/treelist">TreeList</a> <strong>doesn't</strong> provide a configuration option to indicate that we're going to lazily load the widget data. Instead we have to resort to its data source.</p>
<h2 id="treelistdatasource">TreeListDataSource</h2>
<p>The TreeList has its own DataSource implementation, which extends the KendoUI DataSource. Unlike the TreeView which works with a hierarchical data structure, it expects a linear data structure, i.e. JavaScript array, and the relations are described using property references. So for example the following collection:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#a2f;font-weight:bold">var</span> dataSource <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> kendo.data.TreeListDataSource({
    data<span style="color:#666">:</span> [
        { employeeId<span style="color:#666">:</span> <span style="color:#666">1</span>, name<span style="color:#666">:</span> <span style="color:#b44">&#39;Montgomery Burns&#39;</span>, reportsTo<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">null</span>, hasSubordinates<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">true</span> },
        { employeeId<span style="color:#666">:</span> <span style="color:#666">2</span>, name<span style="color:#666">:</span> <span style="color:#b44">&#34;Homer Simpson&#34;</span>, reportsTo<span style="color:#666">:</span> <span style="color:#666">1</span>, hasSubordinates<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span> },
        { employeeId<span style="color:#666">:</span> <span style="color:#666">3</span>, name<span style="color:#666">:</span> <span style="color:#b44">&#34;Lenford Leonard&#34;</span>, reportsTo<span style="color:#666">:</span> <span style="color:#666">1</span>, hasSubordinates<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span> }
    ]
});

</code></pre></div><p>will result in the corresponding tree:</p>
<pre><code>+-- Montgomery Burns  
|   +-- Homer Simpson  
|   +-- Lenford Leonard
</code></pre><h3 id="remote-data-binding">Remote Data Binding</h3>
<p>For remote data binding we need to use the DataSource's <code>transport</code> property. This is straightforward as in any other Kendo widget:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a2f;font-weight:bold">var</span> treeListDataSource <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> kendo.data.TreeListDataSource({
    transport<span style="color:#666">:</span> {
        read<span style="color:#666">:</span> {
            url<span style="color:#666">:</span> <span style="color:#b44">&#39;api/employees&#39;</span>,
            type<span style="color:#666">:</span> <span style="color:#b44">&#39;GET&#39;</span>,
            dataType<span style="color:#666">:</span> <span style="color:#b44">&#39;json&#39;</span>
        }
    },
    schema<span style="color:#666">:</span> { <span style="color:#080;font-style:italic">/* ... */</span> }
});
</code></pre></div><h3 id="schemamodel"><code>schema.model</code></h3>
<p>Next we have adapt the widget to the structure of the data by configuring the schema and describe its field mapping in the model.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#a2f;font-weight:bold">var</span> treeListDataSource <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> kendo.data.TreeListDataSource({
    transport<span style="color:#666">:</span> { <span style="color:#080;font-style:italic">/* ... */</span> },
    schema<span style="color:#666">:</span> {
        <span style="color:#080;font-style:italic">// property mapping
</span><span style="color:#080;font-style:italic"></span>        model<span style="color:#666">:</span> {
            id<span style="color:#666">:</span> <span style="color:#b44">&#39;employeeId&#39;</span>, <span style="color:#080;font-style:italic">// unique id field name
</span><span style="color:#080;font-style:italic"></span>            parentId<span style="color:#666">:</span> <span style="color:#b44">&#39;reportsTo&#39;</span>, <span style="color:#080;font-style:italic">// relation with another record&#39;s id
</span><span style="color:#080;font-style:italic"></span>            hasChildren<span style="color:#666">:</span> <span style="color:#b44">&#39;hasSubordinates&#39;</span>, <span style="color:#080;font-style:italic">// indicates that there&#39;re records that haven&#39;t been loaded
</span><span style="color:#080;font-style:italic"></span>            fields<span style="color:#666">:</span> {
            	employeeId<span style="color:#666">:</span> { type<span style="color:#666">:</span> <span style="color:#b44">&#39;number&#39;</span>, nullable<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span> },
                name<span style="color:#666">:</span> { type<span style="color:#666">:</span> <span style="color:#b44">&#39;string&#39;</span>, nullable<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">false</span> },
                reportsTo<span style="color:#666">:</span> { type<span style="color:#666">:</span> <span style="color:#b44">&#39;number&#39;</span>, nullable<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">true</span> }
            }
        }
    }
});

</code></pre></div><h3 id="haschildren"><code>hasChildren</code></h3>
<p>This property indicates whether it has child items that have to be additionally fetched from the remote service. We can map it to another property, compute it dynamically with a function or hardcode it.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#080;font-style:italic">// hard-code that the item will always have children
</span><span style="color:#080;font-style:italic"></span>hasChildren<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">true</span>

<span style="color:#080;font-style:italic">// map the hasChildren property to the hasSubordinates field, serialized from the server
</span><span style="color:#080;font-style:italic"></span>hasChildren<span style="color:#666">:</span> <span style="color:#b44">&#34;hasSubordinates&#34;</span>

<span style="color:#080;font-style:italic">// compute whether the given item will have children
</span><span style="color:#080;font-style:italic"></span>hasChildren<span style="color:#666">:</span> <span style="color:#a2f;font-weight:bold">function</span>(item) {
    <span style="color:#a2f;font-weight:bold">return</span> item.hasEmployees <span style="color:#666">&amp;&amp;</span> item.relatedDepartment;
}

</code></pre></div><h2 id="the-endpoint">The Endpoint</h2>
<p>On initial load the widget's data soruce will make an API call to the url we've defined, e.g.</p>
<pre><code>GET 'api/employees'
RESPONSE: [{ employeeId: 1, name: 'Montgomery Burns', reportsTo: null, hasSubordinates: true }]
</code></pre><p>thus retrieving and populating the widget with the top-level records, namely the ones the <code>parentId</code> of which is null or not defined. After that when a record is expanded and its <code>hasChildren</code> property is ```true`` the data source will perform an API call but this time by also providing an additional id query parameter, e.g.</p>
<pre><code>GET 'api/employees?id=1'
RESPONSE: [
    { employeeId: 2, name: &quot;Homer Simpson&quot;, reportsTo: 1, hasSubordinates: false },
    { employeeId: 3, name: &quot;Lenford Leonard&quot;, reportsTo: 1, hasSubordinates: false }]
</code></pre><p>In this case the endpoint should return only the descendands of the record with id of 1. Once they are loaded, the DataSource caches them in memory and does not send a request for the same record. If the default url format is not suitable to the remote service, we can use the <a href="http://docs.telerik.com/kendo-ui/api/javascript/data/datasource#configuration-transport.parameterMap">transport.parameterMap</a> to convert it.
You can find the complete example <a href="https://jsfiddle.net/8xwhv0Le/1/">here</a>.</p>


		<section class="social-share">
    
    
    <a href="//twitter.com/share?url=https%3a%2f%2fdeniskyashif.com%2fkendoui-treelist-load-on-demand%2f&amp;text=KendoUI%20TreeList%20Load%20on%20Demand&amp;via=deniskyashif" target="_blank" class="share-btn twitter">
        <i class="fa fa-2x fa-twitter"></i>
    </a>
    
    
    
    <a href="//reddit.com/submit?url=https%3a%2f%2fdeniskyashif.com%2fkendoui-treelist-load-on-demand%2f&amp;title=KendoUI%20TreeList%20Load%20on%20Demand" target="_blank" class="share-btn reddit">
        <i class="fa fa-2x fa-reddit-alien"></i>
    </a>
    
    
    
    <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fdeniskyashif.com%2fkendoui-treelist-load-on-demand%2f" target="_blank" class="share-btn facebook">
        <i class="fa fa-2x fa-facebook"></i>
    </a>
    
    
    
    <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fdeniskyashif.com%2fkendoui-treelist-load-on-demand%2f&amp;title=KendoUI%20TreeList%20Load%20on%20Demand" target="_blank" class="share-btn linkedin">
        <i class="fa fa-2x fa-linkedin"></i>
    </a>
    
    
    
    
    
    <a href="mailto:?subject=Check out 'KendoUI%20TreeList%20Load%20on%20Demand' by Denis%20Kyashif&amp;body=https%3a%2f%2fdeniskyashif.com%2fkendoui-treelist-load-on-demand%2f" target="_blank" class="share-btn email">
        <i class="fa fa-2x fa-envelope"></i>
    </a>
    
</section>

<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "deniskyashif" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




	</div>

	<div class="pagination">
		<a href="/statistical-machine-translation-on-azure-vm-using-moses/" class="left arrow">&#8592;</a>
		<a href="/impressions-from-emea-pug-challenge-2017/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        <footer>
	<span>
		&copy; <time datetime="2019-12-16 20:22:56.296838 &#43;0200 EET m=&#43;0.183505963">2019</time> Denis Kyashif
	</span>
    <br/>
</footer>

    </body>
</html>
